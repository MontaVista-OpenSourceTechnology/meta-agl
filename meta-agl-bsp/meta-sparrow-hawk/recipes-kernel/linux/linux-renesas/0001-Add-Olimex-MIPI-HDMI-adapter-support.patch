From 494a4375f9c94775b33e66ddea6b2c67fd8259a4 Mon Sep 17 00:00:00 2001
From: Scott Murray <scott.murray@konsulko.com>
Date: Wed, 18 Feb 2026 11:49:58 -0500
Subject: [PATCH] Add Olimex MIPI-HDMI adapter support

Upstream-Status: Pending

Signed-off-by: Scott Murray <scott.murray@konsulko.com>
---
 arch/arm64/boot/dts/renesas/Makefile          |   2 +
 .../r8a779g3-sparrow-hawk-dsi-mipi-hmdi.dtso  | 103 ++++++++++++++++++
 2 files changed, 105 insertions(+)
 create mode 100644 arch/arm64/boot/dts/renesas/r8a779g3-sparrow-hawk-dsi-mipi-hmdi.dtso

diff --git a/arch/arm64/boot/dts/renesas/Makefile b/arch/arm64/boot/dts/renesas/Makefile
index 203250e403a1..35f4badf705b 100644
--- a/arch/arm64/boot/dts/renesas/Makefile
+++ b/arch/arm64/boot/dts/renesas/Makefile
@@ -128,6 +128,8 @@ r8a779g3-sparrow-hawk-rpi-display-2-7in-dtbs := r8a779g3-sparrow-hawk.dtb r8a779
 dtb-$(CONFIG_ARCH_R8A779G0) += r8a779g3-sparrow-hawk-rpi-display-2-7in.dtb
 r8a779g3-sparrow-hawk-dsi-waveshare-panel-dtbs := r8a779g3-sparrow-hawk.dtb r8a779g3-sparrow-hawk-dsi-waveshare-panel.dtbo
 dtb-$(CONFIG_ARCH_R8A779G0) += r8a779g3-sparrow-hawk-dsi-waveshare-panel.dtb
+r8a779g3-sparrow-hawk-dsi-mipi-hmdi-dtbs := r8a779g3-sparrow-hawk.dtb r8a779g3-sparrow-hawk-dsi-mipi-hmdi.dtbo
+dtb-$(CONFIG_ARCH_R8A779G0) += r8a779g3-sparrow-hawk-dsi-mipi-hmdi.dtb
 
 dtb-$(CONFIG_ARCH_R8A779G0) += r8a779g3-white-hawk-single.dtb
 r8a779g3-white-hawk-single-ard-audio-da7212-dtbs := r8a779g3-white-hawk-single.dtb white-hawk-ard-audio-da7212.dtbo
diff --git a/arch/arm64/boot/dts/renesas/r8a779g3-sparrow-hawk-dsi-mipi-hmdi.dtso b/arch/arm64/boot/dts/renesas/r8a779g3-sparrow-hawk-dsi-mipi-hmdi.dtso
new file mode 100644
index 000000000000..14e31b7d2830
--- /dev/null
+++ b/arch/arm64/boot/dts/renesas/r8a779g3-sparrow-hawk-dsi-mipi-hmdi.dtso
@@ -0,0 +1,103 @@
+// SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
+/*
+ * Device Tree Overlay for Olimex MIPI-HDMI adapter connected to J4:DSI
+ * on R-Car V4H ES3.0 Sparrow Hawk board
+ *
+ * Copyright (C) 2026 Scott Murray <scott.murray@konsulko.com>
+ *
+ */
+
+/dts-v1/;
+/plugin/;
+
+#include <dt-bindings/gpio/gpio.h>
+
+&{/} {
+	hdmi-connector {
+		compatible = "hdmi-connector";
+		label = "hdmi";
+		type = "a";
+		ddc-i2c-bus = <&i2c0_mux3>;
+
+		port {
+			hdmi_connector_in: endpoint {
+				remote-endpoint = <&lt8912b_out>;
+			};
+		};
+	};
+};
+
+&pfc {
+	msiof2_pins: dsi0_pwr {
+		groups = "msiof2_rxd";
+		function = "msiof2";
+	};
+};
+
+&msiof2 {
+	pinctrl-0 = <&msiof2_pins>;
+	pinctrl-names = "default";
+	status = "okay";
+};
+
+&i2c0_mux3 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+
+	hdmi-bridge@48 {
+		compatible = "lontium,lt8912b";
+		reg = <0x48>;
+		reset-gpio = <&gpio0 18 GPIO_ACTIVE_LOW>;
+		// Define to make driver happy, even though they are documented as optional
+		vcchdmipll-supply = <&reg_3p3v>;
+		vcchdmitx-supply = <&reg_3p3v>;
+		vcclvdspll-supply = <&reg_3p3v>;
+		vcclvdstx-supply = <&reg_3p3v>;
+		vccmipirx-supply = <&reg_3p3v>;
+		vccsysclk-supply = <&reg_3p3v>;
+		vdd-supply = <&reg_3p3v>;
+		status = "okay";
+
+		ports {
+			#address-cells = <1>;
+			#size-cells = <0>;
+
+			port@0 {
+				reg = <0>;
+
+				hdmi_out_in: endpoint {
+					data-lanes = <1 2>;
+					remote-endpoint = <&dsi0_out>;
+				};
+			};
+
+			port@1 {
+				reg = <1>;
+
+				lt8912b_out: endpoint {
+					remote-endpoint = <&hdmi_connector_in>;
+				};
+			};
+		};
+	};
+};
+
+&dsi0 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+	status = "okay";
+
+	ports {
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		port@1 {
+			reg = <1>;
+
+			dsi0_out: endpoint {
+				remote-endpoint = <&hdmi_out_in>;
+				data-lanes = <1 2>;
+			};
+		};
+	};
+};
-- 
2.51.0

